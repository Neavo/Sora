-- Engine
local S, C, L, DB = unpack(select(2, ...))

-- Variables
local debuffs = {
	[741] = {
		-- 熔火之心
		["general"] = {},
		[1519] = {},
		[1520] = {},
		[1521] = {},
		[1522] = {},
		[1523] = {},
		[1524] = {},
		[1525] = {},
		[1526] = {},
		[1527] = {},
		[1528] = {}
	},
	[742] = {
		-- 黑翼之巢
		["general"] = {},
		[1529] = {},
		[1530] = {},
		[1531] = {},
		[1532] = {},
		[1533] = {},
		[1534] = {},
		[1535] = {},
		[1536] = {}
	},
	[743] = {
		-- 安其拉废墟
		["general"] = {},
		[1537] = {},
		[1538] = {},
		[1539] = {},
		[1540] = {},
		[1541] = {},
		[1542] = {}
	},
	[744] = {
		-- 安其拉神殿
		["general"] = {},
		[1543] = {},
		[1547] = {},
		[1544] = {},
		[1545] = {},
		[1548] = {},
		[1546] = {},
		[1549] = {},
		[1550] = {},
		[1551] = {}
	},
	[234] = {
		-- 剃刀沼泽
		["general"] = {},
		[896] = {},
		[895] = {},
		[899] = {},
		[900] = {},
		[901] = {}
	},
	[233] = {
		-- 剃刀高地
		["general"] = {},
		[1142] = {},
		[433] = {},
		[1143] = {},
		[1146] = {},
		[1141] = {}
	},
	[230] = {
		-- 厄运之槌
		["general"] = {},
		[402] = {},
		[403] = {},
		[404] = {},
		[405] = {},
		[406] = {},
		[407] = {},
		[408] = {},
		[409] = {},
		[410] = {},
		[411] = {},
		[412] = {},
		[413] = {},
		[414] = {},
		[415] = {},
		[416] = {},
		[417] = {}
	},
	[240] = {
		-- 哀嚎洞穴
		["general"] = {},
		[474] = {},
		[476] = {},
		[475] = {},
		[477] = {},
		[478] = {},
		[479] = {},
		[480] = {},
		[481] = {}
	},
	[239] = {
		-- 奥达曼
		["general"] = {},
		[467] = {},
		[468] = {},
		[469] = {},
		[748] = {},
		[470] = {},
		[471] = {},
		[472] = {},
		[473] = {}
	},
	[64] = {
		-- 影牙城堡
		["general"] = {},
		[96] = {},
		[97] = {},
		[98] = {},
		[99] = {},
		[100] = {}
	},
	[226] = {
		-- 怒焰裂谷
		["general"] = {},
		[694] = {},
		[695] = {},
		[696] = {},
		[697] = {}
	},
	[236] = {
		-- 斯坦索姆
		["general"] = {},
		[443] = {},
		[445] = {},
		[749] = {},
		[446] = {},
		[448] = {},
		[449] = {},
		[450] = {},
		[451] = {},
		[452] = {},
		[453] = {},
		[454] = {},
		[455] = {},
		[456] = {}
	},
	[63] = {
		-- 死亡矿井
		["general"] = {},
		[89] = {},
		[90] = {},
		[91] = {},
		[92] = {},
		[93] = {}
	},
	[232] = {
		-- 玛拉顿
		["general"] = {},
		[423] = {},
		[424] = {},
		[425] = {},
		[427] = {},
		[428] = {},
		[429] = {},
		[430] = {},
		[431] = {}
	},
	[238] = {
		-- 监狱
		["general"] = {},
		[464] = {},
		[465] = {},
		[466] = {}
	},
	[241] = {
		-- 祖尔法拉克
		["general"] = {},
		[483] = {},
		[484] = {},
		[485] = {},
		[486] = {},
		[487] = {},
		[489] = {}
	},
	[316] = {
		-- 血色修道院
		["general"] = {},
		[688] = {},
		[671] = {},
		[674] = {}
	},
	[311] = {
		-- 血色大厅
		["general"] = {},
		[660] = {},
		[654] = {},
		[656] = {}
	},
	[231] = {
		-- 诺莫瑞根
		["general"] = {},
		[419] = {},
		[420] = {},
		[421] = {},
		[418] = {},
		[422] = {}
	},
	[246] = {
		-- 通灵学院
		["general"] = {},
		[659] = {},
		[663] = {},
		[665] = {},
		[666] = {},
		[684] = {}
	},
	[237] = {
		-- 阿塔哈卡神庙
		["general"] = {},
		[457] = {},
		[458] = {},
		[459] = {},
		[463] = {}
	},
	[227] = {
		-- 黑暗深渊
		["general"] = {},
		[368] = {},
		[436] = {},
		[426] = {},
		[1145] = {},
		[447] = {},
		[1144] = {},
		[437] = {},
		[444] = {}
	},
	[229] = {
		-- 黑石塔下层
		["general"] = {},
		[388] = {},
		[389] = {},
		[390] = {},
		[391] = {},
		[392] = {},
		[393] = {},
		[394] = {},
		[395] = {},
		[396] = {}
	},
	[228] = {
		-- 黑石深渊
		["general"] = {},
		[369] = {},
		[370] = {},
		[371] = {},
		[372] = {},
		[373] = {},
		[374] = {},
		[375] = {},
		[376] = {},
		[377] = {},
		[378] = {},
		[379] = {},
		[380] = {},
		[381] = {},
		[383] = {},
		[384] = {},
		[385] = {},
		[386] = {},
		[387] = {}
	}
}

-- Event
local function OnInitialize(self, event, ...)
	C.UnitFrame = C.UnitFrame or {}
	C.UnitFrame.RaidAuras = C.UnitFrame.RaidAuras or {}
end

local function OnPlayerLogin(self, event, ...)
	local num = 19999
	local auras = C.UnitFrame.RaidAuras
	local k1, v1, k2, v2, k3, v3 = nil, nil, nil, nil, nil, nil

	for k1, v1 in pairs(debuffs) do
		for k2, v2 in pairs(v1) do
			for k3, v3 in pairs(v2) do
				num = num - 1
				auras[v3] = num
			end
		end
	end
end

-- Handler
local EventHandler = S.CreateEventHandler()
EventHandler.Event.INITIALIZE = OnInitialize
EventHandler.Event.PLAYER_LOGIN = OnPlayerLogin
EventHandler.Register()
